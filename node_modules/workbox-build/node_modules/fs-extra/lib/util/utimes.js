'use strict'

const fs = require('graceful-fs')

function utimesMillis (path, atime, mtime, callback) {
  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)
  fs.open(path, 'r+', (err, fd) => {
    if (err) return callback(err)
    fs.futimes(fd, atime, mtime, futimesErr => {
      fs.close(fd, closeErr => {
        if (callback) callback(futimesErr || closeErr)
      })
    })
  })
}

module.exports = {
<<<<<<< Updated upstream
  hasMillisRes,
  hasMillisResSync,
  timeRemoveMillis,
  utimesMillis
=======
  utimesMillis,
  utimesMillisSync
>>>>>>> Stashed changes
}
